---
import Tag from "@/components/ui/tag.astro";

interface Post {
  path: string;
  date: string;
  title: string;
  tags?: string[];
}

interface Props {
  content: Post;
  children: any;
}

const { content } = Astro.props;
const { date, title, tags } = content;

// Format date function
function formatDate(date: string, locale: string = "en-US") {
  return new Date(date).toLocaleDateString(locale, {
    year: "numeric",
    month: "long",
    day: "numeric",
  });
}
---

<article>
  <div class="xl:divide-y xl:divide-border">
    <header class="pt-10 xl:pb-6">
      <div class="space-y-4 text-center">
        <dl>
          <div>
            <dt class="sr-only">Published on</dt>
            <dd class="text-sm font-mono uppercase tracking-tight text-muted-foreground">
              <time datetime={date}>{formatDate(date)}</time>
            </dd>
          </div>
        </dl>
        <div>
          <h1
            class="text-3xl font-bold tracking-tight text-foreground sm:text-4xl md:text-5xl lg:text-6xl"
          >
            {title}
          </h1>
        </div>
      </div>
    </header>
    <div
      class="divide-y divide-border pb-8 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0"
    >
      <dl class="pb-8 pt-6 xl:col-span-1 xl:border-b xl:border-border xl:pt-11">
        <dt class="sr-only">Authors</dt>
        <dd>
          <ul
            class="flex flex-wrap justify-center gap-4 xl:flex-col xl:justify-start xl:space-y-8"
          >
            <li class="flex items-center space-x-2 pt-8">
              <span class="font-mono text-muted-foreground">&larr;</span>
              <a
                href="/"
                class="font-mono text-sm text-muted-foreground transition-colors hover:text-foreground"
              >
                Back to the blog
              </a>
            </li>
          </ul>
        </dd>
      </dl>
      <div class="divide-y divide-border xl:col-span-3 xl:row-span-2 xl:pb-0">
        <div class="prose max-w-none pb-8 pt-10 dark:prose-invert">
          <slot />
        </div>
        <footer>
          <div
            class="text-sm font-medium leading-5 xl:col-start-1 xl:row-start-2 xl:divide-y xl:divide-border"
          >
            {
              tags && (
                <div class="py-4 xl:py-8">
                  <h2 class="font-mono text-xs uppercase tracking-tight text-muted-foreground">
                    Tags
                  </h2>
                  <div class="mt-2 flex flex-wrap gap-2">
                    {tags.map((tag) => (
                      <Tag text={tag} />
                    ))}
                  </div>
                </div>
              )
            }
          </div>
        </footer>
      </div>
    </div>
  </div>
</article>
